# Autopilot Mode Configuration
# Copy to ~/.config/email-nurse/autopilot.yaml and customize
#
# Autopilot uses AI to process ALL emails based on your natural language
# instructions below. The AI interprets your preferences and decides
# what action to take for each email.

autopilot:
  enabled: true

  # Natural language instructions for the AI
  # Be as specific as you want - the AI will interpret these
  instructions: |
    Handle my email according to these preferences:

    ## Priority & Importance
    - Emails from my team (@mycompany.com): leave in inbox, high priority
    - Emails from my manager: leave in inbox, flag for attention
    - Emails where I'm CC'd but not TO: lower priority, can be archived

    ## Newsletters & Marketing
    - Tech newsletters I've subscribed to: archive to "Reading List"
    - Marketing/promotional I didn't ask for: delete
    - Daily/weekly digest emails: archive, mark as read

    ## Notifications
    - GitHub notifications: move to "GitHub" folder, mark as read
    - GitHub @mentions or review requests: leave in inbox, flag
    - CI/CD failures: leave in inbox, flag
    - Calendar invites: leave in inbox

    ## Transactional
    - Order confirmations: move to "Receipts" folder
    - Shipping updates: move to "Receipts" folder
    - Password resets: leave in inbox (never auto-process these)

    ## Auto-Reply Guidelines
    - Only suggest replies for work emails requiring acknowledgment
    - Never auto-reply to personal emails
    - Keep suggested replies brief and professional

    ## Default Behavior
    - When uncertain: leave in inbox (ignore action)
    - Never delete anything that looks personal or unique
    - Flag emails that seem important but don't match any rule
    - Express confidence honestly - use lower scores when unsure

  # Which mailboxes to process
  mailboxes:
    - INBOX

  # Specific accounts to process (null = all accounts)
  accounts: null

  # Central account for all move/archive operations (optional)
  # When set, emails from other accounts will be moved to folders on this account
  # main_account: iCloud

  # Route specific folders to local "On My Mac" mailboxes instead of account folders
  # Useful for keeping newsletters/marketing local while syncing important emails
  # local_folders:
  #   - Newsletters
  #   - Marketing

  # Never auto-process emails matching these sender patterns
  # (case-insensitive partial match)
  exclude_senders:
    - "security@"
    - "no-reply@bank"
    - "password"

  # Never auto-process emails with these subject patterns
  # (case-insensitive partial match)
  exclude_subjects:
    - "CONFIDENTIAL"
    - "password reset"
    - "two-factor"
    - "verification code"

  # Only process emails from the last N days
  max_age_days: 7

  # Quick rules - processed BEFORE AI (instant, no API cost)
  # First match wins, so order matters
  quick_rules:
    # Example: CSquare SHPC notifications â†’ mark read + Trash
    - name: "CSquare SHPC"
      match:
        sender_contains: ["support@csquare.com"]
        subject_contains: ["Csquare SHPC"]
      actions: [mark_read, delete]

    # Example: Move GitHub notifications to folder
    - name: "GitHub Notifications"
      match:
        sender_domain: ["github.com"]
      action: move
      folder: GitHub

  # Inbox aging - automatically move stale emails to a review folder
  inbox_aging_enabled: false
  inbox_stale_days: 30              # Days before email is "stale"
  needs_review_folder: "Needs Review"
  needs_review_retention_days: 14   # Days in review before deletion to Trash

  # Database cleanup - days to keep processed email records
  processed_retention_days: 365

  # Per-account settings for folder handling
  # Different providers (iCloud, Exchange, Gmail) have different folder creation capabilities
  # account_settings:
  #   iCloud:
  #     folder_policy: auto_create    # auto_create, queue, or interactive
  #     notify_on_pending: false
  #   "Exchange Account":
  #     folder_policy: queue          # Exchange often can't create folders via AppleScript
  #     notify_on_pending: true

  # Per-folder retention rules - automatically purge old emails
  # folder_retention_rules:
  #   - folder: "Newsletters"
  #     retention_days: 30
  #   - folder: "GitHub"
  #     retention_days: 14
  #   - folder: "Receipts"
  #     retention_days: 365
