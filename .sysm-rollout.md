# SYSM Rollout - Tracking Document

**Rollout Date:** 2026-02-05
**Review Date:** 2026-02-06 evening (24 hours)

## Status: ACTIVE - Hybrid Mode

sysm fixes deployed (T-007, T-008). Running in **hybrid** mode:
- **iCloud & Gmail**: sysm (fast path)
- **CSquare**: AppleScript fallback (CSquare uses "Inbox" not "INBOX")

---

## Timeline

1. **Initial deploy** (20:50): Full sysm mode — discovered --account bug + missing fields
2. **Rollback** (20:55): Back to AppleScript while sysm gets fixed
3. **sysm fixes deployed** (22:00): T-007 (messageId) + T-008 (--account fix, accountName field)
4. **Re-enabled sysm** (22:00): Full sysm mode — discovered CSquare "Inbox" vs "INBOX" mismatch
5. **Switched to hybrid** (22:10): sysm for iCloud/Gmail, AppleScript fallback for CSquare

---

## Production Configuration

- **File:** `~/.config/email-nurse/.env`
- **Setting:** `EMAIL_NURSE_MESSAGE_PROVIDER=hybrid`

---

## Observed Performance (First Runs)

| Account | Provider | Messages | Duration | Notes |
|---------|----------|----------|----------|-------|
| iCloud | sysm | 36 | 4.3s | Was ~8s with AppleScript |
| Gmail | sysm | 16 | 2.0s | |
| CSquare | applescript | 150 | 34.6s | Fallback (mailbox name mismatch) |

**iCloud speedup: ~50%** (matching benchmarks)

---

## Known Limitations

1. **CSquare mailbox name mismatch**
   - CSquare account uses "Inbox" (not "INBOX")
   - sysm `mail inbox` command hardcodes `mailbox "INBOX"`
   - **Workaround:** Hybrid mode auto-falls back to AppleScript
   - **Fix:** sysm could do case-insensitive mailbox matching

2. **Mailbox Operations**
   - Still using AppleScript for mailbox listing
   - AppleScript 7.4x faster for this specific operation

3. **Content Truncation**
   - sysm now supports `--max-content` flag (T-007)
   - Not yet integrated into email-nurse sysm wrapper

---

## Performance Tracking

**Metrics File:** `~/.config/email-nurse/metrics.jsonl`

### Review Commands

```bash
email-nurse autopilot performance              # Last 24 hours
email-nurse autopilot performance --hours 12   # Last 12 hours
email-nurse autopilot performance --json       # JSON export
```

---

## Rollback Procedure

Edit `~/.config/email-nurse/.env`:
```
EMAIL_NURSE_MESSAGE_PROVIDER=applescript
```

No restart needed — takes effect on next autopilot run (within 5 minutes).

---

## Testing Checklist

- [x] Autopilot runs complete successfully (verified 22:11)
- [x] Emails being processed (quick rules firing)
- [x] sysm works for iCloud and Gmail
- [x] CSquare falls back to AppleScript gracefully
- [x] Quick rules still work (LogicMonitor, Reddit)
- [ ] AI classification still works (needs email requiring AI)
- [x] Performance metrics accumulating in metrics.jsonl

---

**Next Review:** Tomorrow evening (2026-02-06)
**Tracking Since:** 2026-02-05 22:10
